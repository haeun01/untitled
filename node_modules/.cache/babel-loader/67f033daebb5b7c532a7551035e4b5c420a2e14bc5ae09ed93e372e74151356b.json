{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\uC774\\uD558\\uC740\\\\OneDrive\\\\\\uBB38\\uC11C\\\\GitHub\\\\untitled\\\\src\\\\Component\\\\FeedEdit.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { SessionCurrent } from \"./SessionCurrent\";\nimport axios from \"axios\";\nimport { getServerImgFile } from \"./File\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n    padding: 0 10%;\n`;\n_c = Container;\nconst ImgBox = styled.div`\n    width: 100%;\n    height: 400px;\n    border: 1px solid white;\n    display: flex;\n    justify-content: center;\n`;\n_c2 = ImgBox;\nconst Textarea = styled.textarea`\n    width: 100%;\n    padding: 5px;\n    background-color: black;\n    color: white;\n    border: 1px solid white;\n`;\n_c3 = Textarea;\nconst Button = styled.div`\n    background-color: white;\n    color: black;\n    padding: 10px 0;\n    text-align: center;\n    /* width: 100px; */\n    margin: auto;\n    cursor: pointer;\n`;\n_c4 = Button;\nexport function FeedEdit({\n  feed\n}) {\n  _s();\n  console.log(3, feed);\n  const [imageSrc, setImageSrc] = useState(null);\n  const [imageByte, setImageByte] = useState(null);\n  const [imageSendFile, setImageSendFile] = useState(null);\n  const [text, setText] = useState(feed.text);\n  useEffect(() => {\n    console.log(4, feed);\n    if (feed.imageData) {\n      setImageSrc(getServerImgFile(feed.imageData));\n    } else {\n      setImageSrc(feed.image);\n    }\n  }, [feed]);\n  function showFile(file) {\n    if (file) {\n      const imageUrl = URL.createObjectURL(file);\n      setImageSrc(imageUrl);\n    }\n  }\n  function convertImageToBytes(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const arrayBuffer = reader.result;\n        const byteArray = new Uint8Array(arrayBuffer);\n        setImageByte(byteArray);\n        convertBytesToFile(byteArray);\n      };\n      reader.onerror = () => {\n        console.error(\"파일 읽기에 실패했습니다.\");\n      };\n      reader.readAsArrayBuffer(file);\n    }\n  }\n  function convertBytesToFile(byteArray) {\n    const blob = new Blob([byteArray]);\n    const file = new File([blob], 'default_filename.bin');\n    showFile(file);\n    setImageSendFile(file);\n  }\n  async function editBtnClick() {\n    if (imageSendFile != null) {\n      const formData = new FormData();\n      formData.append(\"file\", imageSendFile);\n      formData.append(\"id\", feed.id);\n      formData.append(\"text\", text);\n      console.log(1, formData);\n      try {\n        const response = await axios.post(\"http://localhost:8080/api/updateFeed\", formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        console.log(\"img\", response.data);\n      } catch (error) {\n        console.error(\"요청에 실패했습니다.\", error.response ? error.response.data : error.message);\n      }\n      window.location.href = '/feed/' + feed.id;\n    } else {\n      alert(\"이미지 파일을 업로드해주세요.\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"50px\",\n          fontWeight: \"bold\",\n          textAlign: \"center\",\n          margin: \"20px 0\"\n        },\n        children: \"\\uD53C\\uB4DC \\uC218\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        accept: \"image/*\",\n        onChange: e => {\n          convertImageToBytes(e);\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 116\n      }, this), /*#__PURE__*/_jsxDEV(ImgBox, {\n        children: imageSrc && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageSrc,\n          alt: \"Selected Image\",\n          style: {\n            maxHeight: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n        id: \"text\",\n        name: \"text\",\n        rows: \"5\",\n        required: true,\n        value: text,\n        placeholder: \"Enter Profile Text\",\n        onChange: e => {\n          setText(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          editBtnClick();\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(FeedEdit, \"GhnOJ3JJvbcGK/+bQyopMERoySs=\");\n_c5 = FeedEdit;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"ImgBox\");\n$RefreshReg$(_c3, \"Textarea\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"FeedEdit\");","map":{"version":3,"names":["useEffect","useState","styled","SessionCurrent","axios","getServerImgFile","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Container","div","_c","ImgBox","_c2","Textarea","textarea","_c3","Button","_c4","FeedEdit","feed","_s","console","log","imageSrc","setImageSrc","imageByte","setImageByte","imageSendFile","setImageSendFile","text","setText","imageData","image","showFile","file","imageUrl","URL","createObjectURL","convertImageToBytes","event","target","files","reader","FileReader","onload","arrayBuffer","result","byteArray","Uint8Array","convertBytesToFile","onerror","error","readAsArrayBuffer","blob","Blob","File","editBtnClick","formData","FormData","append","id","response","post","headers","data","message","window","location","href","alert","children","style","fontSize","fontWeight","textAlign","margin","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","e","required","src","alt","maxHeight","name","rows","value","placeholder","onClick","_c5","$RefreshReg$"],"sources":["C:/Users/이하은/OneDrive/문서/GitHub/untitled/src/Component/FeedEdit.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { SessionCurrent } from \"./SessionCurrent\"\r\nimport axios from \"axios\"\r\nimport { getServerImgFile } from \"./File\"\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\n\r\nconst Container = styled.div`\r\n    padding: 0 10%;\r\n`\r\nconst ImgBox = styled.div`\r\n    width: 100%;\r\n    height: 400px;\r\n    border: 1px solid white;\r\n    display: flex;\r\n    justify-content: center;\r\n`\r\nconst Textarea = styled.textarea`\r\n    width: 100%;\r\n    padding: 5px;\r\n    background-color: black;\r\n    color: white;\r\n    border: 1px solid white;\r\n`\r\nconst Button = styled.div`\r\n    background-color: white;\r\n    color: black;\r\n    padding: 10px 0;\r\n    text-align: center;\r\n    /* width: 100px; */\r\n    margin: auto;\r\n    cursor: pointer;\r\n`\r\n\r\nexport function FeedEdit({feed}){\r\n    console.log(3, feed)\r\n    const [imageSrc, setImageSrc] = useState(null);\r\n    const [imageByte, setImageByte] = useState(null);\r\n    const [imageSendFile, setImageSendFile] = useState(null);\r\n    const [text, setText] = useState(feed.text);\r\n\r\n    useEffect(() => {\r\n        console.log(4, feed)\r\n        if(feed.imageData){\r\n            setImageSrc(getServerImgFile(feed.imageData));\r\n        }else{\r\n            setImageSrc(feed.image)\r\n        }\r\n    }, [feed]);\r\n\r\n    \r\n\r\n    function showFile(file) {\r\n        if (file) {\r\n            const imageUrl = URL.createObjectURL(file);\r\n            setImageSrc(imageUrl);\r\n        }\r\n    }\r\n\r\n    function convertImageToBytes(event) {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = () => {\r\n                const arrayBuffer = reader.result;\r\n                const byteArray = new Uint8Array(arrayBuffer);\r\n                setImageByte(byteArray);\r\n                convertBytesToFile(byteArray);\r\n            };\r\n\r\n            reader.onerror = () => {\r\n                console.error(\"파일 읽기에 실패했습니다.\");\r\n            };\r\n\r\n            reader.readAsArrayBuffer(file);\r\n        }\r\n    }\r\n\r\n    function convertBytesToFile(byteArray) {\r\n        const blob = new Blob([byteArray]);\r\n        const file = new File([blob], 'default_filename.bin');\r\n        showFile(file);\r\n        setImageSendFile(file);\r\n    }\r\n\r\n    async function editBtnClick() {\r\n        if(imageSendFile!=null){\r\n            const formData = new FormData();\r\n            formData.append(\"file\", imageSendFile);\r\n            formData.append(\"id\", feed.id);\r\n            formData.append(\"text\", text);\r\n            console.log(1, formData)\r\n            try {\r\n                const response = await axios.post(\"http://localhost:8080/api/updateFeed\", formData, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                });\r\n                console.log(\"img\",response.data);\r\n            } catch (error) {\r\n                console.error(\"요청에 실패했습니다.\", error.response ? error.response.data : error.message);\r\n            }\r\n            window.location.href = '/feed/' + feed.id;\r\n        }else{\r\n            alert(\"이미지 파일을 업로드해주세요.\");\r\n        }\r\n    }\r\n\r\n\r\n    return <>\r\n        <Container>\r\n            <div style={{fontSize:\"50px\", fontWeight:\"bold\", textAlign:\"center\", margin:\"20px 0\"}}>피드 수정</div>\r\n            <input type=\"file\" id=\"fileInput\" accept=\"image/*\" onChange={(e)=>{convertImageToBytes(e)}} required /><br/>\r\n            <ImgBox>{imageSrc && <img src={imageSrc} alt=\"Selected Image\" style={{ maxHeight: '100%'}} />}</ImgBox>\r\n            <Textarea \r\n                id=\"text\" \r\n                name=\"text\" \r\n                rows=\"5\"\r\n                required\r\n                value={text}\r\n                placeholder=\"Enter Profile Text\"\r\n                onChange={(e)=> {setText(e.target.value)}}\r\n            />\r\n            <Button onClick={()=>{editBtnClick()}}>Edit</Button>\r\n        </Container>\r\n    </>\r\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,cAAc,QAAQ,kBAAkB;AACjD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,gBAAgB,QAAQ,QAAQ;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAG9C,MAAMC,SAAS,GAAGT,MAAM,CAACU,GAAG;AAC5B;AACA,CAAC;AAAAC,EAAA,GAFKF,SAAS;AAGf,MAAMG,MAAM,GAAGZ,MAAM,CAACU,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA,CAAC;AAAAG,GAAA,GANKD,MAAM;AAOZ,MAAME,QAAQ,GAAGd,MAAM,CAACe,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA,CAAC;AAAAC,GAAA,GANKF,QAAQ;AAOd,MAAMG,MAAM,GAAGjB,MAAM,CAACU,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAAQ,GAAA,GARKD,MAAM;AAUZ,OAAO,SAASE,QAAQA,CAAC;EAACC;AAAI,CAAC,EAAC;EAAAC,EAAA;EAC5BC,OAAO,CAACC,GAAG,CAAC,CAAC,EAAEH,IAAI,CAAC;EACpB,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC6B,aAAa,EAAEC,gBAAgB,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAAC+B,IAAI,EAAEC,OAAO,CAAC,GAAGhC,QAAQ,CAACqB,IAAI,CAACU,IAAI,CAAC;EAE3ChC,SAAS,CAAC,MAAM;IACZwB,OAAO,CAACC,GAAG,CAAC,CAAC,EAAEH,IAAI,CAAC;IACpB,IAAGA,IAAI,CAACY,SAAS,EAAC;MACdP,WAAW,CAACtB,gBAAgB,CAACiB,IAAI,CAACY,SAAS,CAAC,CAAC;IACjD,CAAC,MAAI;MACDP,WAAW,CAACL,IAAI,CAACa,KAAK,CAAC;IAC3B;EACJ,CAAC,EAAE,CAACb,IAAI,CAAC,CAAC;EAIV,SAASc,QAAQA,CAACC,IAAI,EAAE;IACpB,IAAIA,IAAI,EAAE;MACN,MAAMC,QAAQ,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MAC1CV,WAAW,CAACW,QAAQ,CAAC;IACzB;EACJ;EAEA,SAASG,mBAAmBA,CAACC,KAAK,EAAE;IAChC,MAAML,IAAI,GAAGK,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIP,IAAI,EAAE;MACN,MAAMQ,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAE/BD,MAAM,CAACE,MAAM,GAAG,MAAM;QAClB,MAAMC,WAAW,GAAGH,MAAM,CAACI,MAAM;QACjC,MAAMC,SAAS,GAAG,IAAIC,UAAU,CAACH,WAAW,CAAC;QAC7CnB,YAAY,CAACqB,SAAS,CAAC;QACvBE,kBAAkB,CAACF,SAAS,CAAC;MACjC,CAAC;MAEDL,MAAM,CAACQ,OAAO,GAAG,MAAM;QACnB7B,OAAO,CAAC8B,KAAK,CAAC,gBAAgB,CAAC;MACnC,CAAC;MAEDT,MAAM,CAACU,iBAAiB,CAAClB,IAAI,CAAC;IAClC;EACJ;EAEA,SAASe,kBAAkBA,CAACF,SAAS,EAAE;IACnC,MAAMM,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,SAAS,CAAC,CAAC;IAClC,MAAMb,IAAI,GAAG,IAAIqB,IAAI,CAAC,CAACF,IAAI,CAAC,EAAE,sBAAsB,CAAC;IACrDpB,QAAQ,CAACC,IAAI,CAAC;IACdN,gBAAgB,CAACM,IAAI,CAAC;EAC1B;EAEA,eAAesB,YAAYA,CAAA,EAAG;IAC1B,IAAG7B,aAAa,IAAE,IAAI,EAAC;MACnB,MAAM8B,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEhC,aAAa,CAAC;MACtC8B,QAAQ,CAACE,MAAM,CAAC,IAAI,EAAExC,IAAI,CAACyC,EAAE,CAAC;MAC9BH,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE9B,IAAI,CAAC;MAC7BR,OAAO,CAACC,GAAG,CAAC,CAAC,EAAEmC,QAAQ,CAAC;MACxB,IAAI;QACA,MAAMI,QAAQ,GAAG,MAAM5D,KAAK,CAAC6D,IAAI,CAAC,sCAAsC,EAAEL,QAAQ,EAAE;UAChFM,OAAO,EAAE;YACL,cAAc,EAAE;UACpB;QACJ,CAAC,CAAC;QACF1C,OAAO,CAACC,GAAG,CAAC,KAAK,EAACuC,QAAQ,CAACG,IAAI,CAAC;MACpC,CAAC,CAAC,OAAOb,KAAK,EAAE;QACZ9B,OAAO,CAAC8B,KAAK,CAAC,aAAa,EAAEA,KAAK,CAACU,QAAQ,GAAGV,KAAK,CAACU,QAAQ,CAACG,IAAI,GAAGb,KAAK,CAACc,OAAO,CAAC;MACtF;MACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,GAAGjD,IAAI,CAACyC,EAAE;IAC7C,CAAC,MAAI;MACDS,KAAK,CAAC,kBAAkB,CAAC;IAC7B;EACJ;EAGA,oBAAOhE,OAAA,CAAAE,SAAA;IAAA+D,QAAA,eACHjE,OAAA,CAACG,SAAS;MAAA8D,QAAA,gBACNjE,OAAA;QAAKkE,KAAK,EAAE;UAACC,QAAQ,EAAC,MAAM;UAAEC,UAAU,EAAC,MAAM;UAAEC,SAAS,EAAC,QAAQ;UAAEC,MAAM,EAAC;QAAQ,CAAE;QAAAL,QAAA,EAAC;MAAK;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAClG1E,OAAA;QAAO2E,IAAI,EAAC,MAAM;QAACpB,EAAE,EAAC,WAAW;QAACqB,MAAM,EAAC,SAAS;QAACC,QAAQ,EAAGC,CAAC,IAAG;UAAC7C,mBAAmB,CAAC6C,CAAC,CAAC;QAAA,CAAE;QAACC,QAAQ;MAAA;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAAA1E,OAAA;QAAAuE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC5G1E,OAAA,CAACM,MAAM;QAAA2D,QAAA,EAAE/C,QAAQ,iBAAIlB,OAAA;UAAKgF,GAAG,EAAE9D,QAAS;UAAC+D,GAAG,EAAC,gBAAgB;UAACf,KAAK,EAAE;YAAEgB,SAAS,EAAE;UAAM;QAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,eACvG1E,OAAA,CAACQ,QAAQ;QACL+C,EAAE,EAAC,MAAM;QACT4B,IAAI,EAAC,MAAM;QACXC,IAAI,EAAC,GAAG;QACRL,QAAQ;QACRM,KAAK,EAAE7D,IAAK;QACZ8D,WAAW,EAAC,oBAAoB;QAChCT,QAAQ,EAAGC,CAAC,IAAI;UAACrD,OAAO,CAACqD,CAAC,CAAC3C,MAAM,CAACkD,KAAK,CAAC;QAAA;MAAE;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACF1E,OAAA,CAACW,MAAM;QAAC4E,OAAO,EAAEA,CAAA,KAAI;UAACpC,YAAY,CAAC,CAAC;QAAA,CAAE;QAAAc,QAAA,EAAC;MAAI;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C;EAAC,gBACd,CAAC;AACP;AAAC3D,EAAA,CA7FeF,QAAQ;AAAA2E,GAAA,GAAR3E,QAAQ;AAAA,IAAAR,EAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAA4E,GAAA;AAAAC,YAAA,CAAApF,EAAA;AAAAoF,YAAA,CAAAlF,GAAA;AAAAkF,YAAA,CAAA/E,GAAA;AAAA+E,YAAA,CAAA7E,GAAA;AAAA6E,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}